---
description: 规格文档生成 - 创建需求、设计和任务三个完整规格文档
argument-hint: <功能需求描述>
---

## 功能
基于产品功能想法，生成完整的规格文档套件：requirements.md（需求规格）、design.md（设计文档）、tasks.md（任务清单）。

## 生成文档
- **requirements.md**：EARS格式的用户故事和验收标准
- **design.md**：系统架构、组件接口、数据模型、测试策略
- **tasks.md**：可执行的开发任务分解和实施计划

## 工作流程
1. **需求生成**：基于功能想法创建EARS格式的初始需求
2. **需求评审**：与用户迭代完善需求直到获得明确批准
3. **设计创建**：基于批准的需求创建详细的技术设计文档
4. **设计评审**：与用户确认设计方案和技术选择
5. **任务规划**：将设计转化为具体的编码任务清单
6. **任务评审**：确认实施计划的可行性和完整性

## 文档标准
### Requirements.md 格式
- 功能概述和背景介绍
- 用户故事：`As a [role], I want [feature], so that [benefit]`
- EARS格式验收标准：具体、可测试的条件
- 边界情况和约束条件

### Design.md 包含
- 架构概览和技术选型
- 组件设计和接口定义
- 数据模型和流程图
- 错误处理和测试策略

### Tasks.md 特点
- 编号检查清单格式
- 测试驱动的渐进式任务
- 每个任务都有明确的编码目标
- 任务间的依赖关系清晰
- 每个任务标注推荐的 Agent 或命令

## 工作流整合
本命令是 **Ask + Specs 组合拳**的第二步，基于 `/ask` 的对话成果生成规格文档。

### 任务执行指引
生成的 tasks.md 将包含：
```markdown
## 任务清单
- [ ] 任务1：[描述] → 使用 `feature-dev` agent
- [ ] 任务2：[描述] → 使用 `test-runner` agent  
- [ ] 任务3：[描述] → 使用 `/test` 命令
- [ ] 任务4：[描述] → 使用 `debugger` agent
- [ ] 任务5：[描述] → 使用 `doc-writer` agent
```

## Agent 协作矩阵
| 任务类型 | 推荐 Agent/命令 | 说明 |
|---------|----------------|------|
| 功能开发 | `feature-dev` | 新功能实现 |
| 测试设计 | `/test` | 测试策略制定 |
| 测试执行 | `test-runner` | 运行和修复测试 |
| 问题调试 | `debugger` | 问题诊断分析 |
| Bug 修复 | `code-fixer` | 最小化修复 |
| 文档生成 | `doc-writer` | API 和变更文档 |
| 任务规划 | `planner` | 复杂任务分解 |

## 输出承诺
生成的文档将存储在 `docs/specs/{feature_name}/` 目录下，每个任务都明确标注执行方式。

## 价值
将需求分析的成果转化为可执行的技术规格，确保开发过程有清晰的指导和验收标准。